<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <script>
      window.onload = function () {
        /* 
            
            全选功能
            取消
            反选
            提交
            小checkbox和大checkbox同步
        */
        /* 
            全选功能 
                - 点击按钮后，使四个多选框都变成选中状态
        */

        // 获取四个多选框
        const hobbies = document.getElementsByName("hobby");

        //获取全选按钮
        const allBtn = document.getElementById("all");

        //全选框
        const checkAllBtn = document.getElementById("check-all");

        //为按钮绑定单级相应函数
        allBtn.onclick = function () {
          // 将多选框设置为选中状态
          hobbies[0].checked = true;
          for (let index = 0; index < hobbies.length; index++) {
            hobbies[index].checked = true;
          }
        };

        /* 
            取消功能
                - 点击取消按钮后，取消所有的选中的状态
        
        */
        //获取取消按钮
        const noBtn = document.getElementById("no");
        noBtn.onclick = function () {
          for (let i = 0; i < hobbies.length; i++) {
            hobbies[i].checked = false;
          }
        };

        /* 
            反选功能
                - 点金按钮后，选中的取消，没选中的选中
        
        */
        const reverseBtn = document.getElementById("reverse");

        reverseBtn.onclick = function () {
          for (let i = 0; i < hobbies.length; i++) {
            hobbies[i].checked = !hobbies[i].checked;
          }
        };

        /* 
            提交按钮
                - 点击按钮后，将选中的内容显示出来
        */
        const sendBtn = document.getElementById("send");
        sendBtn.onclick = function () {
          for (let i = 0; i < hobbies.length; i++) {
            // if (hobbies[i].checked) {
            //   alert(hobbies[i].value);
            // }
            hobbies[i].checked && alert(hobbies[i].value);
          }
        };

        /* 
            小checkbox和大checkbox同步
                - 全选checkbox发生变化后，将小的checkbox和它同步

        */

        checkAllBtn.onclick = function () {
          console.log(this);
          //在事件的相应函数中，相应函数绑定给谁，this就是谁(箭头函数除外。箭头函数使用外部的this)

          for (let i = 0; i < hobbies.length; i++) {
            hobbies[i].checked = this.checked;
          }
        };

        /* 
            使全选checkbox和四个checkBox进行同步
                如果四个全选了，则全选checkbox也选中，
                如果四个没全选，全选checkbox也步选中
        
        */
        for (let i = 0; i < hobbies.length; i++) {
          hobbies[i].onchange = function () {
            //判断hobbies是否全选
            // 获取所有选中的checkbox
            const checkedBox = document.querySelectorAll(
              "[name=hobby]:checked"
            );
            console.log(checkedBox);
            //判断是否全部选中
            if (hobbies.length === checkedBox.length) {
              checkAllBtn.checked = true;
            } else {
              checkAllBtn.checked = false;
            }
          };
        }

        //全选按钮 取消按钮 反选按钮 都与大的全选按钮有关，不过先不做
      };
    </script>
  </head>
  <body>
    <div>
      <form action="#">
        <div>
          请选择你的爱好
          <input type="checkbox" id="check-all" /> 全选
        </div>
        <div>
          <input type="checkbox" name="hobby" value="兵乓球" /> 兵乓球
          <input type="checkbox" name="hobby" value="篮球" /> 篮球
          <input type="checkbox" name="hobby" value="羽毛球" /> 羽毛球
          <input type="checkbox" name="hobby" value="足球" /> 足球
        </div>
        <div>
          <button type="button" id="all">全选</button>
          <button type="button" id="no">取消</button>
          <button type="button" id="reverse">反选</button>
          <button type="button" id="send">提交</button>
        </div>
      </form>
    </div>
  </body>
</html>
